

    CREATE TABLE CUSTOMER(
    CNO NUMBER NOT NULL PRIMARY KEY, -- 고객 고유 번호 
    CID VARCHAR2(30) NOT NULL UNIQUE, --고객 아이디 
    CPW VARCHAR2(30)NOT NULL,  --고객 비밀번호
    CNAME VARCHAR2(30) NOT NULL , --고객 이름
    CNICKNAME VARCHAR2(30) NOT NULL UNIQUE, --고객 닉네임
    CPHONE CHAR(11) NOT NULL UNIQUE , --고객 전화번호 
    CEMAIL VARCHAR2(50)NOT NULL UNIQUE, -- 고객 이메일
    CPOTO varchar2(50),  --고객 이미지 섬네일
    CGRADE CHAR(1)NOT NULL, --고객 등급 (1 브론즈,2 실버 ,3 다이아,4 vip,5 어드민)
    CDEPT VARCHAR2(20),  --고객 분류 (1 일반 고객 ,2 관리자 
    CGENDER CHAR(1)NOT NULL, --고객 성별 (1 남자 ,2 여자 )
    CREGDATE DATE  --고객 가입일
);

CREATE SEQUENCE CUSTOMER_SEQ;


CREATE TABLE DEPARTMENT(
    DSAUP_NO varchar2(15) NOT NULL PRIMARY KEY, --음식점 사업자 번호 (고유키)
    DID VARCHAR2(30) NOT NULL UNIQUE , -- 음식점 아이디 
    DPW VARCHAR2(30) NOT NULL --음식점 비밀번호 
);

CREATE TABLE DEPARTMENT_INFO(
    DNO NUMBER NOT NULL PRIMARY KEY, --음식점 고유번호
    DSEAT NUMBER NOT NULL, --음식점 좌석수 
    DSAUP_NO varchar2(15) NOT NULL UNIQUE, --음식점 사업자 번호 
    DPHONE VARCHAR2(20) NOT NULL UNIQUE, --음식점 전화번호
    DNAME VARCHAR2(50) NOT NULL , --음식점 이름
    DADDRESS VARCHAR2(300) NOT NULL, --음식점 주소 (서울시 마포구 노고산동 ...)
    DSTART CHAR(4) NOT NULL , --영업 시작 시간(1000 >10:00)
    DEND CHAR(4) NOT NULL , --영업 종료 시간 (2030 >20:30)
    DPARKING CHAR(1) NOT NULL , -- 주차가능 (1 주차가능,2 주차 불가)
    DTYPE VARCHAR2(50) NOT NULL,  -- 음식점 종류 (회/스시 , 일식 등등)
    DPHOTO VARCHAR2(1000) NOT NULL, -- 음식점 사진 저장 (사진1.jpg,사진2.jpg,사진3.jpg)
    DHIT NUMBER DEFAULT 0, --조회수
    DRATING NUMBER(2,1) DEFAULT 0.0, --평점(리뷰 작성시 업데이트 처리)
    DACCPET NUMBER NOT NULL,  --최초 글 등록시 0으로 등록 되어있다가 관리자가 승인하면 1로 변경 (0 승인대기 ,1 승인)  
    DREG_DATE DATE  -- 글 등록일 
    
    
);

CREATE SEQUENCE DEPARTMENT_INFO_SEQ;


CREATE TABLE MENU_INFO(
    MNO NUMBER NOT NULL PRIMARY KEY, --메뉴 고유번호 
    MNAME VARCHAR2(50) NOT NULL UNIQUE, -- 메뉴 이름
    MPRICE VARCHAR2(10) NOT NULL, --메뉴 가격
    DSAUP_NO varchar2(15) REFERENCES  DEPARTMENT(DSAUP_NO) --사업자 번호(어떤 음식점 메뉴인지 )
);

CREATE SEQUENCE MENU_SEQ;


CREATE TABLE APPOINTMENT(
    ANO NUMBER NOT NULL PRIMARY KEY, --예약 번호 
    ADATE varchar2(30) not null, -- 예약일 ( 시간 포함 ) 
    AP_COUNT NUMBER NOT NULL, -- 총 예약 인원
    CNO NUMBER REFERENCES  CUSTOMER(CNO), -- 예약한 사용자 번호 ( 고객 테이블 참조용)
    DSAUP_NO varchar2(15) REFERENCES  DEPARTMENT(DSAUP_NO) --예약한 업체 사업자 번호 
);

CREATE SEQUENCE APPOINTMENT_SEQ;


CREATE TABLE REVIEW(
    RNO NUMBER NOT NULL PRIMARY KEY, --리뷰 번호
    RTITLE VARCHAR2(100) NOT NULL , --리뷰 제목 
    RCONTENT VARCHAR2(2000) NOT NULL, --리뷰 내용
    RPOINT NUMBER(2,1) NOT NULL,  --리뷰 별점(정수 1자리,소수 1자리 )
    RPOTO VARCHAR2(300), --리뷰 사진 (등록 안해두 등록 가능)
    RDEPTH NUMBER DEFAULT 0, -- 자신이 쓴글 0  답글 할수록 +1
    REPORTCOUNT NUMBER DEFAULT 0, --신고 회수 (5회 이상시 제목,내용 신고된 글입니다.로 변경)
    RWRITER_DATE DATE, --리뷰 등록일
    RAPPOINTMENT NUMBER,  -- 예약자 아닐시 0(Insert 문에서 count로 자동으로 가져옴) , 예약자 수량   Insert Into (....(select count(*) from appointment where cNo=? and dSaup_no=?)..)
    CNO NUMBER REFERENCES  CUSTOMER(CNO), --리뷰 작성자 (회원 테이블 참고용)
    DSAUP_NO varchar2(15) REFERENCES  DEPARTMENT(DSAUP_NO) --업체 사업자 번호 
);


CREATE SEQUENCE REVIEW_SEQ;


--테스트 아이디 삽입
INSERT INTO CUSTOMER VALUES(CUSTOMER_SEQ.NEXTVAL,'test1','test1','테스트1','닉네임1','01011111111','test1@custom.com','testimg1.jpg',1,'',1,sysdate);
INSERT INTO CUSTOMER VALUES(CUSTOMER_SEQ.NEXTVAL,'test2','test2','테스트2','닉네임2','01011112222','test2@custom.com','testimg2.jpg',2,'',2,sysdate);
INSERT INTO CUSTOMER VALUES(CUSTOMER_SEQ.NEXTVAL,'test3','test3','테스트3','닉네임3','01011113333','test3@custom.com','testimg3.jpg',3,'',1,sysdate);
INSERT INTO CUSTOMER VALUES(CUSTOMER_SEQ.NEXTVAL,'test4','test4','테스트4','닉네임4','01011114444','test4@custom.com','testimg4.jpg',4,'',2,sysdate);
INSERT INTO CUSTOMER VALUES(CUSTOMER_SEQ.NEXTVAL,'test5','test5','테스트5','닉네임5','01011115555','test5@custom.com','testimg5.jpg',5,'',1,sysdate);

--테스트 업체아이디 
INSERT INTO DEPARTMENT VALUES('11111111111','cus1','cus1');
INSERT INTO DEPARTMENT VALUES('11111111112','cus2','cus2');
INSERT INTO DEPARTMENT VALUES('11111111113','cus3','cus3');


--테스트 업체 정보 
INSERT INTO DEPARTMENT_INFO VALUES(DEPARTMENT_INFO_SEQ.NEXTVAL,30,'11111111111','01022221111','스시이마','서울특별시 은평구 역말로 49-1 1F','1000','2200','1','회/스시','201978_1580641462134_5654.jfif,201978_1580641462134_5655.jfif,244033_1563623907424_29250.jfif',0,0,1,SYSDATE);
INSERT INTO DEPARTMENT_INFO VALUES(DEPARTMENT_INFO_SEQ.NEXTVAL,20,'11111111112','01022222222','오레노라멘','서울시 은평구 응암동 587-39','1100','2000','1','라멘/소바/우동','810562_1593517025754_6086.jfif,810562_1593517025754_6087.jfif',0,0,1,SYSDATE);
INSERT INTO DEPARTMENT_INFO VALUES(DEPARTMENT_INFO_SEQ.NEXTVAL,10,'11111111113','01022223333','햇살머무는식탁','서울특별시 은평구 연서로29길 32 1F','1200','2300','1','까스 요리','75402_1510895726828_73403.jfif,617296_1592064144788789.jpg,617296_1592064154629892.jpg',0,0,1,SYSDATE);

--테스트 업체 메뉴
INSERT INTO MENU_INFO VALUES(MENU_SEQ.NEXTVAL,'닷샤이 준마이','150,000','11111111111');
INSERT INTO MENU_INFO VALUES(MENU_SEQ.NEXTVAL,'상선여수 준마이','68,000','11111111111');
INSERT INTO MENU_INFO VALUES(MENU_SEQ.NEXTVAL,'초키겐 혼죠조','46,000','11111111111');

INSERT INTO MENU_INFO VALUES(MENU_SEQ.NEXTVAL,'모둠 카츠','10,000','11111111113');
INSERT INTO MENU_INFO VALUES(MENU_SEQ.NEXTVAL,'치즈 카츠','10,500','11111111113');
INSERT INTO MENU_INFO VALUES(MENU_SEQ.NEXTVAL,'로스 카츠','8,500','11111111113');

INSERT INTO MENU_INFO VALUES(MENU_SEQ.NEXTVAL,'토리 빠이탄','8,000','11111111112');
INSERT INTO MENU_INFO VALUES(MENU_SEQ.NEXTVAL,'토리 쇼우','8,000','11111111112');
INSERT INTO MENU_INFO VALUES(MENU_SEQ.NEXTVAL,'시오 라멘','8,000','11111111112');

--테스트 리뷰

INSERT INTO REVIEW VALUES(REVIEW_SEQ.nextval,'스시이마 맛 리뷰1 ','맛있다.1',4.5,'',0,0,SYSDATE,(SELECT COUNT(*) FROM APPOINTMENT WHERE CNO='1' AND DSAUP_NO='11111111111'),1,'11111111111');
INSERT INTO REVIEW VALUES(REVIEW_SEQ.nextval,'오레노 라면 리뷰1 ','맛없다.1',3.0,'',0,0,SYSDATE,(SELECT COUNT(*) FROM APPOINTMENT WHERE CNO='1' AND DSAUP_NO='11111111112'),1,'11111111112');
INSERT INTO REVIEW VALUES(REVIEW_SEQ.nextval,'햇살머무는 리뷰1','맛있다.1',5.0,'',0,0,SYSDATE,(SELECT COUNT(*) FROM APPOINTMENT WHERE CNO='1' AND DSAUP_NO='11111111113'),1,'11111111113');

INSERT INTO REVIEW VALUES(REVIEW_SEQ.nextval,'스시이마 리뷰2 ','맛있다.2',4.0,'',0,0,SYSDATE,(SELECT COUNT(*) FROM APPOINTMENT WHERE CNO='2' AND DSAUP_NO='11111111111'),2,'11111111111');
INSERT INTO REVIEW VALUES(REVIEW_SEQ.nextval,'오레노 라면 리뷰2 ','맛없다.2',3.0,'',0,0,SYSDATE,(SELECT COUNT(*) FROM APPOINTMENT WHERE CNO='2' AND DSAUP_NO='11111111112'),2,'11111111112');
INSERT INTO REVIEW VALUES(REVIEW_SEQ.nextval,'햇살머무는 식탁 리뷰2','맛있다.2',5.0,'',0,0,SYSDATE,(SELECT COUNT(*) FROM APPOINTMENT WHERE CNO='2' AND DSAUP_NO='11111111113'),2,'11111111113');

INSERT INTO REVIEW VALUES(REVIEW_SEQ.nextval,'스시이마 리뷰3 ','맛있다.',3.5,'',0,0,SYSDATE,(SELECT COUNT(*) FROM APPOINTMENT WHERE CNO='3' AND DSAUP_NO='11111111111'),3,'11111111111');
INSERT INTO REVIEW VALUES(REVIEW_SEQ.nextval,'오레노 라면 리뷰3 ','맛없다..',1.5,'',0,0,SYSDATE,(SELECT COUNT(*) FROM APPOINTMENT WHERE CNO='3' AND DSAUP_NO='11111111112'),3,'11111111112');
INSERT INTO REVIEW VALUES(REVIEW_SEQ.nextval,'햇살머무는 식탁 리뷰3','맛있다.',2.0,'',0,0,SYSDATE,(SELECT COUNT(*) FROM APPOINTMENT WHERE CNO='3' AND DSAUP_NO='11111111113'),3,'11111111113');